# 数据大屏

## 适配方案

数据大屏需要适配用户的屏幕大小，否则会出现用户屏幕大小不同时出现样式错乱问题。适配解决方案一般分为 vw、vh 与 scalc 缩放功能。

### vw与vh

IE8后推出一个新单位：vw 与 vh。当为盒子设置 100vw 和 100vh 时，会直接占满整个屏幕。因此可以通过计算把 px 换算为vw 与 vh，实现响应式自适应。

#### 案例

现有一个盒子，需要其占满整个屏幕，里面有一个盒子，需要其宽高为 100px。

占满整个屏幕只需要让其 100vw 和 100vh即可。里面的小盒子需要计算，计算公式为屏幕宽度除以100得出 1vw对应多少像素，如我的屏幕为1920px，则 1920 / 100 = 19.2 。即 1vw 对应 19.2px，则 100px 则是 100 / 19.2 = 5vw 左右。高度计算同理。

#### 优缺点

- 优点

  简单快捷，使用方便

- 缺点

  需要大量计算，无法控制字体本身的大小，如果盒子过窄会使得字体覆盖旁边的盒子

### scalc

通过 CSS 中 `transform` 中的 `scalc()` 缩放属性实现功能。

首先为最外层的盒子设置宽高、固定定位属性，定位到页面的正中央。

```css
.box {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: (-50%, -50%);
    width: 1920px;
    height: 1080px;
    transform-origin: left top;
}
```

> 注意
>
> `scalc()` 属性默认以盒子正中心为单位做缩放处理，这样会导致放大时把内容顶出左侧，需要修改缩放定位点。`transform-origin` 可以修改定位点。

然后通过 JavaScript 获取最外层盒子元素，设置一个函数获取该元素的宽高，计算出需要缩放的倍数，并比较宽高倍数，返回更小的那个。

```js
let box = document.querySelector('.box')
box.style.transform = `scalc(${getScalc()})`

function getScalc(w = 1920, h = 1080) {
    let ww = window.innerWidth / w
    let wh = window.innerHeight / h
    
    return ww < wh ? ww : wh
}
```

> 注意
>
> 函数接收需要缩放的主屏幕宽高，默认值为 1920 与 1080，真实场景下需要动态获取并传参。

最后为 window 绑定一个页面缩放事件，页面缩放后动态缩放。

```js
// ....

window.onresize = () => {
    box.style.transform = `scalc(${getScalc()})`
}
```

