# 瀑布流

## a

## b

## flex布局

第三种方法是通过 `flex` 布局实现纯 `CSS` 瀑布流效果。

这种方法的核心思想步骤为：
1. 为父容器设置一个固定的高度，并设置为 `flex` 布局
2. 让盒子主轴方向变为纵轴排列 `column` 
3. 使用 `flex-wrap` 属性来允许子元素换行
4. 为每一项子盒子设置百分比宽度，使其自适应容器宽度。比如希望一行4个元素，则子盒子宽度为 25%

```html
<template>
  <div class="water-fall">
    <div v-for="item in generateArticleRoutes" :key="item.path" >
      <img :src="item.meta.img" alt="">
    </div>
  </div>
</template>

<style lang="less" scoped>
.water-fall {
  display: flex;
  flex-direction: column;
  height: 1250px;
  flex-wrap: wrap;

  div {
    width: 25%;
  }
}
</style>
```

此时有瀑布流的初步效果了。
![初步效果](https://pic.imgdb.cn/item/671a0f1cd29ded1a8cde2e08.png)

但是还有两个问题需要解决：
1. 子盒子元素之间没有空隙，需要加上
2. 子盒子图片排列和第二种情况一样，是竖向排列，需要改成横向排列

来看第一个问题，为每个容器图片之间添加间隙，这个使用 `gap` 和 `padding` 就能实现。外层容器加个 X轴 `overflow: hidden` 隐藏掉一处部分和滚动条。
```less
.water-fall {
  display: flex;
  flex-direction: column;
  height: 1250px;
  flex-wrap: wrap;
  gap: 11px; // [!code ++]
  padding: 11px; // [!code ++]
  overflow: hidden; // [!code ++]
}
```

来看第二个问题，竖向排列改为横向排列，可以画一张草图辅助理解。
![草图](https://pic.imgdb.cn/item/671a1e5cd29ded1a8cf2bd9e.png)
根据草图看第一列的数字，不难看出它们都有一个规律，就是 `4n+1` ，以此类推第二列就是 `4n+2` ，第三列就是 `4n+3` ......使用 `nth-child()` 为符合要求的子盒子图片设置 `order` 排序即可实现。

```less
div {
    &:nth-child(4n+1) { // [!code ++]
        order: 1; // [!code ++]
    } // [!code ++]
    &:nth-child(4n+2) { // [!code ++]
        order: 2; // [!code ++]
    } // [!code ++]
    &:nth-child(4n+3) { // [!code ++]
        order: 3; // [!code ++]
    } // [!code ++]
    &:nth-child(4n) { // [!code ++]
        order: 4; // [!code ++]
    } // [!code ++]
}
```