# 饼图中间内容自定义

## 效果

Echart 饼图中间内容允许自定义，具体效果如下图所示：

![示例](https://pic.imgdb.cn/item/65621720c458853aef11e1d6.jpg)

## 实现

想要实现这个功能，需要在饼图的 `series` 数组对象的 `label` 属性中设置一个 `normal` 属性，其中：

- `formatter` 设置要显示的文本，字符串的形式，格式如下：

  ```js
  '{xxx|}' + 变量1 + '} {yyy|}' + 变量2 + '次}'
  ```

  其中 `xxx` 与 `yyy` 与他们后面的变量分别一一对应，后续通过它们给文本设置样式。

- `rich` 原意是富文本，这里用于给自定义内容设置样式，格式如下：

  ```js
  rich: {
    xxx: {
      fontSize: 14,
      color: 'red'
    },
    yyy: {
      fontWeight: 600
    }
  }
  ```

整体代码如下所示：

```js
option = {
  // ...
  series: [
    {
      name: '结构物管理一张图',
      type: 'pie',
      radius: ['80%', '90%'],
      center: ['20%', '50%'],
      avoidLabelOverlap: false,
      label: {
        show: true,
        position: 'right',
        normal: {
          show: true,
          position: 'center',
          color: 'red',
          formatter:
            '{total|' + 1 + '次}' + '{title|告警}',
          rich: {
            total: {
              fontSize: 18,
              fontFamily: 'PingFang SC',
              color: 'rgb(254, 201, 49)',
              fontWeight: 400,
              letterSpace: 1.5,
              lineHeight: 20
            },
            title: {
              fontFamily: 'PingFang SC',
              fontSize: 14,
              color: 'rgb(0, 255, 255)',
              lineHeight: 30,
              fontWeight: 400,
              letterSpace: 1.17
            }
          }
        },
      },
      emphasis: {
        label: {
          show: true,
          fontSize: 20,
          fontWeight: 'bold'
        }
      },
      labelLine: {
        show: false
      },
      data: [
        {
          name: 'a',
          point: 41.67,
          value: 5
        },
        {
          name: 'b',
          point: 22.67,
          value: 3
        },
        {
          name: 'c',
          point: 41.67,
          value: 4
        }
      ]
    }
  ]
};
```

## 总结

在 `formatter` 里写内容，`rich` 里面写你需要的样式。